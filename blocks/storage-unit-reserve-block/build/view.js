(()=>{function e(e){const t=document.getElementById("storage_unit_reserve_notification");if(t)return t.querySelector("#storage_unit_reserve_notification_body").innerText=e,void t.classList.remove("storagepress_notification_hidden");console.error("Message element not found!")}function t(t){t.preventDefault();const o=t.target,n=new FormData(o),r=Object.fromEntries(n);console.log(r),window.wpApiSettings?window.storagepress.reserve_unit_route?fetch(window.storagepress.reserve_unit_route,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings.nonce},body:JSON.stringify(r)}).then((e=>e.json())).then((n=>{n.code||(console.log("Success:",n),o.reset(),e("Your reservation request has been submitted! Refreshing..."),setTimeout((function(){window.location.reload()}),5e3)),n.code&&"rest_forbidden_context"===n.code?(console.error("You do not have permission to perform this action."),e("You do not have permission to perform this action.")):n.code&&"user_has_active_inquiries"===n.code?(console.error("You already have an active inquiry!"),e("You already have an active inquiry!")):n.code&&"unit_already_reserved"===n.code?(console.error("This unit is already reserved!"),e("This unit is already reserved!")):n.code&&"unit_already_rented"===n.code&&(console.error("This unit is already rented!"),e("This unit is already rented!")),t.target.parentNode.close()})).catch((e=>{console.error("Error:",e)})):console.error("STORAGEPRESS_RESERVE_ROUTE not defined yet!"):console.error("wpApiSettings not defined yet!")}document.addEventListener("DOMContentLoaded",(e=>{if(message=window.storagepress?.reserve_status_notification,!message){message=document.createElement("div"),message.id="storage_unit_reserve_notification",message.classList.add("storagepress_notification_hidden"),document.body.appendChild(message),window.storagepress.reserve_status_notification=message;const e=document.createElement("div");e.id="storage_unit_reserve_notification_body",message.appendChild(e),e.innerText="( ͡° ͜ʖ ͡°)";const t=document.createElement("button");t.id="storage_unit_reserve_notification_close",t.innerHTML="&times;",t.onclick=function(){message.classList.add("storagepress_notification_hidden")},message.appendChild(t)}})),document.addEventListener("DOMContentLoaded",(e=>{Array.from(document.querySelectorAll(".storage-unit-reserve-form")).map((e=>{e.addEventListener("submit",t)}))}))})();